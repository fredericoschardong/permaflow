!function(){function t(e,n,i){var r=t.resolve(e);if(null==r){i=i||e,n=n||"root";var o=new Error('Failed to require "'+i+'" from "'+n+'"');throw o.path=i,o.parent=n,o.require=!0,o}var s=t.modules[r];return s.exports||(s.exports={},s.client=s.component=!0,s.call(this,s.exports,t.relative(r),s)),s.exports}t.modules={},t.aliases={},t.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var n=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],i=0;i<n.length;i++){var e=n[i];if(t.modules.hasOwnProperty(e))return e;if(t.aliases.hasOwnProperty(e))return t.aliases[e]}},t.normalize=function(t,e){var n=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var i=0;i<e.length;++i)".."==e[i]?t.pop():"."!=e[i]&&""!=e[i]&&n.push(e[i]);return t.concat(n).join("/")},t.register=function(e,n){t.modules[e]=n},t.alias=function(e,n){if(!t.modules.hasOwnProperty(e))throw new Error('Failed to alias "'+e+'", it does not exist');t.aliases[n]=e},t.relative=function(e){function n(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function i(n){var r=i.resolve(n);return t(r,e,n)}var r=t.normalize(e,"..");return i.resolve=function(i){var o=i.charAt(0);if("/"==o)return i.slice(1);if("."==o)return t.normalize(r,i);var s=e.split("/"),a=n(s,"deps")+1;return a||(a=0),i=s.slice(0,a+1).join("/")+"/deps/"+i},i.exists=function(e){return t.modules.hasOwnProperty(i.resolve(e))},i},t.register("component-indexof/index.js",function(t,e,n){var i=[].indexOf;n.exports=function(t,e){if(i)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}}),t.register("component-emitter/index.js",function(t,e,n){function i(t){return t?r(t):void 0}function r(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}var o=e("indexof");n.exports=i,i.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){i.off(t,n),e.apply(this,arguments)}var i=this;return this._callbacks=this._callbacks||{},e._off=n,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;var i=o(n,e._off||e);return~i&&n.splice(i,1),this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var i=0,r=n.length;r>i;++i)n[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),t.register("holla/dist/holla.js",function(t,e,n){!function(){var t,i,r,o;i=e("./Client"),t=e("./Call"),o=e("./shims"),r={createClient:function(t){return null==t&&(t={}),new i(t)},Call:t,Client:i,shims:o,supported:o.supported,config:o.PeerConnConfig,createStream:function(t,e){var n,i;return null==o.getUserMedia?e("Missing getUserMedia"):(n=e,i=function(t){return e(null,t)},o.getUserMedia(t,i,n),r)},createFullStream:function(t){return r.createStream({video:!0,audio:!0},t)},createVideoStream:function(t){return r.createStream({video:!0,audio:!1},t)},createAudioStream:function(t){return r.createStream({video:!1,audio:!0},t)}},n.exports=r}.call(this)}),t.register("holla/dist/Client.js",function(t,e,n){!function(){var t,i,r,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("emitter"),o=io,t=e("./Call"),i=function(e){function n(e){var n=this;this.options=null!=e?e:{},this.io=o.connect(this.options.host,this.options.socketio),this.io.on("reconnect",function(){return n.emit("reconnect")}),this.io.on("disconnect",function(){return n.emit("disconnect")}),this.io.on("error",function(t){return n.emit("error",t)}),this.io.on("callRequest",function(e){var i;return i=new t(n,e.id,e.caller),n.emit("call",i)}),this.io.on("presenceChange",function(t,e){return n.emit("presence",t,e)})}return a(n,e),n.prototype.createCall=function(e){var n=this;return this.io.emit("createCall",function(i,r){var o;return null!=i?e(i):(o=new t(n,r),e(null,o))}),this},n.prototype.register=function(t,e){return this.io.emit("register",t,e)},n.prototype.unregister=function(t){return this.io.emit("unregister",t)},n}(r),n.exports=i}.call(this)}),t.register("holla/dist/Call.js",function(t,e,n){!function(){var t,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=e("./User"),i=e("emitter"),t=function(t){function e(t,e,n){var i=this;this.client=t,this.id=e,this._removeUser=o(this._removeUser,this),this._addNewUser=o(this._addNewUser,this),this._add=o(this._add,this),this._handleUserResponse=o(this._handleUserResponse,this),this.unmute=o(this.unmute,this),this.mute=o(this.mute,this),this.empty=o(this.empty,this),this.end=o(this.end,this),this.releaseLocalStream=o(this.releaseLocalStream,this),this.setLocalStream=o(this.setLocalStream,this),this.add=o(this.add,this),this.decline=o(this.decline,this),this.answer=o(this.answer,this),this._users={},n&&(this._add(n),this.caller=this.user(n)),this.client.io.on(""+this.id+":end",function(){return i.empty(),i.emit("end")}),this.client.io.on(""+this.id+":userAdded",this._addNewUser)}return a(e,t),e.prototype.answer=function(){if(!this.localStream)throw new Error("Must call setLocalStream first");return this.client.io.emit(""+this.id+":callResponse",!0),this.client.emit("callAnswered",this),this.caller.createConnection(),this.caller.addLocalStream(this.localStream),this.caller.once("sdp",this.caller.sendAnswer),this},e.prototype.decline=function(){return this.client.io.emit(""+this.id+":callResponse",!1),this.client.emit("callDeclined",this),this},e.prototype.add=function(t){if(!this.localStream)throw new Error("Must call setLocalStream first");return this._add(t),this.client.io.emit("addUser",this.id,t,this._handleUserResponse(this.user(t))),this.user(t)},e.prototype.user=function(t){return this._users[t]},e.prototype.users=function(){return this._users},e.prototype.setLocalStream=function(t){return this.localStream=t,this},e.prototype.releaseLocalStream=function(){var t;return null!=(t=this.localStream)&&t.stop(),delete this.localStream,this},e.prototype.end=function(){var t=this;return this.client.io.emit("endCall",this.id,function(e){return null!=e?t.emit("error",e):void 0}),this},e.prototype.empty=function(){var t,e,n,i,r;for(r=this.users(),e=n=0,i=r.length;i>n;e=++n)t=r[e],this._removeUser(e);return this},e.prototype.mute=function(){var t,e,n,i;if(!this.localStream)throw new Error("Must call setLocalStream first");for(i=this.localStream.getAudioTracks(),e=0,n=i.length;n>e;e++)t=i[e],t.enabled=!1;return this},e.prototype.unmute=function(){var t,e,n,i;if(!this.localStream)throw new Error("Must call setLocalStream first");for(i=this.localStream.getAudioTracks(),e=0,n=i.length;n>e;e++)t=i[e],t.enabled=!0;return this},e.prototype._handleUserResponse=function(t){var e=this;return function(n){return null!=n?"Call declined"===n?(t.accepted=!1,t.emit("declined"),e.emit("userDeclined",t)):(t.emit("error",n),e.emit("error",n)):(t.accepted=!0,t.emit("answered"),e.emit("userAnswered",t)),e}},e.prototype._add=function(t){var e;return null==(e=this._users)[t]&&(e[t]=new r(this,t)),this},e.prototype._addNewUser=function(t){var e;return this._add(t),e=this.user(t),e.createConnection(),e.addLocalStream(this.localStream),e.sendOffer(),this},e.prototype._removeUser=function(t){var e;return e=this.user(t),e.closeConnection(),delete this._users[t],this},e}(i),n.exports=t}.call(this)}),t.register("holla/dist/User.js",function(t,e,n){!function(){var t,i,r,o,s=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,c=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=e("./shims"),i=e("emitter"),t=e("./Channel"),r=function(e){function n(t,e){this.call=t,this.name=e,this._handleRemoteCandidate=s(this._handleRemoteCandidate,this),this._handleRemoteSDP=s(this._handleRemoteSDP,this),this._handleError=s(this._handleError,this),this.createConnection(),this.call.client.io.on(""+t.id+":"+e+":sdp",this._handleRemoteSDP),this.call.client.io.on(""+t.id+":"+e+":candidate",this._handleRemoteCandidate)}return c(n,e),n.prototype.connection=null,n.prototype.createConnection=function(){var e=this;return this.channels={},this.connection=new o.PeerConnection(o.PeerConnConfig,o.constraints),this.connection.onconnecting=function(){return e.emit("connecting")},this.connection.onopen=function(){return e.emit("connected")},this.connection.onicecandidate=function(t){return null!=(null!=t?t.candidate:void 0)?e.sendCandidate(t.candidate):void 0},this.connection.onaddstream=function(t){return e.addStream(t.stream)},this.connection.onremovestream=function(){return e.removeStream()},this.connection.oniceconnectionstatechange=this.connection.onicechange=function(){return"disconnected"===e.connection.iceConnectionState?e.closeConnection():void 0},this.connection.ondatachannel=function(n){var i;return i=n.channel,e.channels[i.label]=new t(e.connection,i.label).setChannel(i),e.emit("data:#{chan.label}",e.channels[i.label])},this},n.prototype.closeConnection=function(){var t,e,n;if(null==this.connection)return this;n=this.channels;for(e in n)t=n[e],t.end();return this.connection.close(),this.connection=null,this.channels=null,this.emit("disconnected"),this},n.prototype.addLocalStream=function(t){return this.connection.addStream(t),this},n.prototype.addStream=function(t){return this._ready=!0,this.stream=t,this.emit("ready",this.stream),this},n.prototype.removeStream=function(){return this.closeConnection(),this},n.prototype.ready=function(t){return this._ready?t(this.stream):this.once("ready",t),this},n.prototype.channel=function(e){return null==this.channels[e]&&(this.channels[e]=new t(this.connection,e),this.emit("data:#{name}",this.channels[e])),this.channels[e]},n.prototype.sendCandidate=function(t){return this.call.client.io.emit("sendCandidate",this.call.id,this.name,t,this._handleError)},n.prototype.sendOffer=function(){var t,e,n=this;return t=function(t){return n.connection.setLocalDescription(t),t.sdp=o.processSDPOut(t.sdp),n.call.client.io.emit("sendSDPOffer",n.call.id,n.name,t,n._handleError)},e=function(t){return n.emit("error",t)},this.connection.createOffer(t,e,o.constraints),this},n.prototype.sendAnswer=function(){var t,e=this;return t=function(t){return t.sdp=o.processSDPOut(t.sdp),e.connection.setLocalDescription(t),e.call.client.io.emit("sendSDPAnswer",e.call.id,e.name,t,e._handleError)},this.connection.createAnswer(t,this._handleError,o.constraints),this},n.prototype._handleError=function(t){return null!=t?this.emit("error",t):void 0},n.prototype._handleRemoteSDP=function(t){var e,n=this;return t.sdp=o.processSDPIn(t.sdp),e=function(){return n.emit("sdp")},this.connection.setRemoteDescription(new o.SessionDescription(t),e,this._handleError),this},n.prototype._handleRemoteCandidate=function(t){return this.emit("candidate",t),this.connection.addIceCandidate(new o.IceCandidate(t)),this},n}(i),n.exports=r}.call(this)}),t.register("holla/dist/Channel.js",function(t,e,n){!function(){var t,i,r=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=e("emitter"),t=function(t){function e(t,e,n){var i;this.connection=t,this.name=e,this.options=null!=n?n:{},this.end=r(this.end,this),this.send=r(this.send,this),this.connect=r(this.connect,this),this.setChannel=r(this.setChannel,this),null==(i=this.options).reliable&&(i.reliable=!1)}return s(e,t),e.prototype.open=!1,e.prototype.setChannel=function(t){var e=this;return this.dc=t,this.dc.onopen=function(){return e.open=!0,e.emit("open")},this.dc.onclose=function(){return e.open=!1,e.emit("end")},this.dc.onmessage=function(t){return e.emit("data",JSON.parse(t.data))},this},e.prototype.connect=function(){return this.setChannel(this.connection.createDataChannel(this.name,this.options)),this},e.prototype.send=function(t){return this.open&&this.dc.send(JSON.stringify(t)),this},e.prototype.end=function(){return this.open&&this.dc.close(),this},e}(i),n.exports=t}.call(this)}),t.register("holla/dist/shims.js",function(t,e,n){!function(){var t,e,i,r,o,s,a,c,l,h,u,d,p;r=window.PeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection,t=window.RTCIceCandidate,o=window.RTCSessionDescription,e=window.MediaStream||window.webkitMediaStream,l=navigator.getUserMedia||navigator.webkitGetUserMedia,s=window.URL||window.webkitURL,null!=l&&(l=l.bind(navigator)),c=navigator.mozGetUserMedia?"firefox":"chrome",p=null!=r&&null!=l,d=function(t){return t},u=function(t){return t},a=function(t,e){var n,i,r;if("string"==typeof e)return a(t,document.getElementById(e));if(e.jquery)for(e.attr("src",t),i=0,r=e.length;r>i;i++)n=e[i],n.play();else e.src=t,e.play();return e},p&&(i={iceServers:[{url:"stun:stun.l.google.com:19302"},{url:"stun:stun1.l.google.com:19302"},{url:"stun:stun2.l.google.com:19302"},{url:"stun:stun3.l.google.com:19302"},{url:"stun:stun4.l.google.com:19302"}]},h={optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannels:!0}]},e.prototype.getVideoTracks||(e.prototype.getVideoTracks=function(){return this.videoTracks},e.prototype.getAudioTracks=function(){return this.audioTracks}),r.prototype.getLocalStreams||(r.prototype.getLocalStreams=function(){return this.localStreams},r.prototype.getRemoteStreams=function(){return this.remoteStreams}),e.prototype.pipe=function(t){var e;return e=s.createObjectURL(this),a(e,t),this}),n.exports={PeerConnection:r,IceCandidate:t,SessionDescription:o,MediaStream:e,getUserMedia:l,URL:s,attachStream:a,processSDPIn:u,processSDPOut:d,PeerConnConfig:i,browser:c,supported:p,constraints:h}}.call(this)}),t.alias("component-emitter/index.js","holla/deps/emitter/index.js"),t.alias("component-emitter/index.js","emitter/index.js"),t.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),t.alias("holla/dist/holla.js","holla/index.js"),"object"==typeof exports?module.exports=t("holla"):"function"==typeof define&&define.amd?define(function(){return t("holla")}):this.holla=t("holla")}();